{"ast":null,"code":"import _toConsumableArray from\"C:/Users/pluto/Documents/GitHub/Bookshop Site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:/Users/pluto/Documents/GitHub/Bookshop Site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/pluto/Documents/GitHub/Bookshop Site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Book from'./Book';import Navbar from'./Navbar';import{FaSearch}from'react-icons/fa';import{firestore}from'../firebase/config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Books=function Books(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),load=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),books=_useState4[0],setBooks=_useState4[1];var handleSearch=function handleSearch(e){e.preventDefault();};useEffect(function(){setLoading(true);var unsub=firestore.collection('Book').onSnapshot(function(snap){var books=[];snap.forEach(function(doc){books.push(_objectSpread(_objectSpread({},doc.data()),{},{id:doc.id}));});setBooks(function(oldBooks){return[].concat(_toConsumableArray(oldBooks),books);});setLoading(false);return function(){return unsub();};});},[]);useEffect(function(){var event=window.addEventListener('scroll',function(){if(!load&&window.innerHeight+window.scrollY>=document.body.scrollHeight){console.log('worked');}});return function(){return window.removeEventListener('scroll',event);};},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{style:{height:'72px'}}),/*#__PURE__*/_jsx(\"section\",{className:\"search\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"search-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search\",className:\"form-input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",onClick:function onClick(e){return handleSearch(e);},children:/*#__PURE__*/_jsx(FaSearch,{})})]})}),/*#__PURE__*/_jsxs(\"section\",{className:\"books\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"books-center\",children:books.map(function(book){return/*#__PURE__*/_jsx(Book,_objectSpread({},book),book.ISBN);})}),load&&/*#__PURE__*/_jsx(\"h2\",{className:\"loading\",children:\"Loading...\"})]})]});};export default Books;","map":{"version":3,"sources":["C:/Users/pluto/Documents/GitHub/Bookshop Site/src/Components/Books.jsx"],"names":["React","useState","useEffect","Book","Navbar","FaSearch","firestore","Books","load","setLoading","books","setBooks","handleSearch","e","preventDefault","unsub","collection","onSnapshot","snap","forEach","doc","push","data","id","oldBooks","event","window","addEventListener","innerHeight","scrollY","document","body","scrollHeight","console","log","removeEventListener","height","map","book","ISBN"],"mappings":"mfAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OAAQC,QAAR,KAAuB,gBAAvB,CACA,OAAQC,SAAR,KAAwB,oBAAxB,C,6IAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAK,eACaN,QAAQ,CAAC,KAAD,CADrB,wCACNO,IADM,eACDC,UADC,8BAEYR,QAAQ,CAAC,EAAD,CAFpB,yCAENS,KAFM,eAEAC,QAFA,eAIb,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAM,CACrBA,CAAC,CAACC,cAAF,GACL,CAFD,CAIAZ,SAAS,CAAC,UAAI,CACRO,UAAU,CAAC,IAAD,CAAV,CACM,GAAMM,CAAAA,KAAK,CAAGT,SAAS,CAACU,UAAV,CAAqB,MAArB,EAA6BC,UAA7B,CAAwC,SAACC,IAAD,CAAQ,CAC9D,GAAIR,CAAAA,KAAK,CAAG,EAAZ,CACAQ,IAAI,CAACC,OAAL,CAAa,SAAAC,GAAG,CAAI,CACdV,KAAK,CAACW,IAAN,gCAAeD,GAAG,CAACE,IAAJ,EAAf,MAA0BC,EAAE,CAAEH,GAAG,CAACG,EAAlC,IACL,CAFD,EAGAZ,QAAQ,CAAC,SAACa,QAAD,CAAY,CACf,mCAAWA,QAAX,EAAuBd,KAAvB,EACL,CAFO,CAAR,CAGAD,UAAU,CAAC,KAAD,CAAV,CACA,MAAO,kBAAMM,CAAAA,KAAK,EAAX,EAAP,CACL,CAVmB,CAAd,CAWX,CAbQ,CAaP,EAbO,CAAT,CAeAb,SAAS,CAAC,UAAI,CACR,GAAMuB,CAAAA,KAAK,CAAGC,MAAM,CAACC,gBAAP,CAAwB,QAAxB,CAAiC,UAAI,CAC7C,GAAG,CAACnB,IAAD,EAASkB,MAAM,CAACE,WAAP,CAAqBF,MAAM,CAACG,OAA5B,EAAsCC,QAAQ,CAACC,IAAT,CAAcC,YAAhE,CAA+E,CACzEC,OAAO,CAACC,GAAR,CAAY,QAAZ,EACL,CACN,CAJa,CAAd,CAKA,MAAO,kBAAKR,CAAAA,MAAM,CAACS,mBAAP,CAA2B,QAA3B,CAAoCV,KAApC,CAAL,EAAP,CACL,CAPQ,CAOP,EAPO,CAAT,CASA,mBACM,wCACM,KAAC,MAAD,IADN,cAEM,YAAK,KAAK,CAAE,CAACW,MAAM,CAAC,MAAR,CAAZ,EAFN,cAGM,gBAAS,SAAS,CAAC,QAAnB,uBACM,cAAM,SAAS,CAAC,aAAhB,wBACM,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,QAA/B,CAAwC,SAAS,CAAC,YAAlD,EADN,cAEM,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,YAAhC,CAA6C,OAAO,CAAE,iBAACvB,CAAD,QAAKD,CAAAA,YAAY,CAACC,CAAD,CAAjB,EAAtD,uBAA6E,KAAC,QAAD,IAA7E,EAFN,GADN,EAHN,cASM,iBAAS,SAAS,CAAC,OAAnB,wBACM,YAAK,SAAS,CAAC,cAAf,UACCH,KAAK,CAAC2B,GAAN,CAAU,SAACC,IAAD,CAAQ,CACb,mBAAO,KAAC,IAAD,kBAA0BA,IAA1B,EAAWA,IAAI,CAACC,IAAhB,CAAP,CACL,CAFA,CADD,EADN,CAMO/B,IAAI,eAAI,WAAI,SAAS,CAAC,SAAd,wBANf,GATN,GADN,CAoBL,CApDD,CAsDA,cAAeD,CAAAA,KAAf","sourcesContent":["import React , {useState,useEffect} from 'react'\r\nimport Book from './Book'\r\nimport Navbar from './Navbar';\r\nimport {FaSearch} from 'react-icons/fa';\r\nimport {firestore} from '../firebase/config'\r\n\r\nconst Books = () =>{\r\n      const [load,setLoading] = useState(false); \r\n      const [books,setBooks] = useState([])\r\n\r\n      const handleSearch = (e) =>{\r\n            e.preventDefault();\r\n      }\r\n\r\n      useEffect(()=>{\r\n            setLoading(true);\r\n                  const unsub = firestore.collection('Book').onSnapshot((snap)=>{\r\n                  let books = [];\r\n                  snap.forEach(doc => {\r\n                        books.push({...doc.data(),id: doc.id});\r\n                  });\r\n                  setBooks((oldBooks)=>{\r\n                        return [...oldBooks,...books]\r\n                  });\r\n                  setLoading(false);\r\n                  return () => unsub();\r\n            });\r\n      },[])\r\n\r\n      useEffect(()=>{\r\n            const event = window.addEventListener('scroll',()=>{\r\n                  if(!load && window.innerHeight + window.scrollY>= document.body.scrollHeight  ){\r\n                        console.log('worked');\r\n                  }\r\n            })\r\n            return ()=> window.removeEventListener('scroll',event);\r\n      },[])\r\n\r\n      return(\r\n            <>\r\n                  <Navbar/>\r\n                  <div style={{height:'72px'}}></div>\r\n                  <section className='search'>\r\n                        <form className='search-form'>\r\n                              <input type='text' placeholder='Search' className='form-input'/>\r\n                              <button type='submit' className='submit-btn' onClick={(e)=>handleSearch(e)} ><FaSearch/></button>\r\n                        </form>\r\n                  </section>\r\n                  <section className='books'>\r\n                        <div className='books-center'>\r\n                        {books.map((book)=>{\r\n                              return <Book key={book.ISBN} {...book}/>\r\n                        })}\r\n                        </div>\r\n                        {load && <h2 className=\"loading\">Loading...</h2>}\r\n                  </section>\r\n            </>\r\n      )\r\n}\r\n\r\nexport default Books;"]},"metadata":{},"sourceType":"module"}